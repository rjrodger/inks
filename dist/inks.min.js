!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).Inks=e()}}((function(){var define,module,exports,_$Inks_1=Inks;const default_options={exclude:()=>!1};function Inks(e,n,l=default_options){return walk("$",e,make_modify_property(n,l),l)}let walkers={string:(e,n,l)=>l(e,n),object:(e,n,l,t)=>{if(null==n||t.exclude(e,n))return n;var r={};return Object.keys(n).forEach(e=>{r[e]=walk(e,n[e],l,t)}),r},array:(e,n,l,t)=>{for(var r=[],u=0;u<n.length;u++)r.push(walk(""+u,n[u],l,t));return r},number:(e,n,l)=>n,bigint:(e,n,l)=>n,boolean:(e,n,l)=>n,symbol:(e,n,l)=>n,function:(e,n,l)=>n,any:(e,n,l)=>n};function walk(e,n,l,t){let r=Array.isArray(n)?"array":typeof n;return(walkers[r]||walkers.any)(e,n,l,t)}function make_modify_property(e,n){return function(l,t){return n.exclude(l,t)?t:replace_values(t,e)}}function replace_values(e,n){e=e.replace(/\\`/g,"\x07");var l=null;let t=null;for(var r=[],u=0;t=e.substring(u).match(/(`.*?`)/);){var a=t[0].substring(1,t[0].length-1);let p=t.index;var o;if(""!==(l=e.substring(u,u+p))&&r.push(l),u=u+p+t[0].length,o=a.match(/^([^:]+):(.*)$/)){var s=o[1],f=o[2],i=n&&n[s];"object"==typeof i?r.push(handle_eval("$obj."+f,i,n)):r.push(null)}else r.push(handle_eval(a,null,n))}""!==(l=e.substring(u,e.length))&&r.push(l);var p=null;return"string"==typeof(p=1===r.length?r[0]:(r=r.map(e=>"string"==typeof e||"number"==typeof e?e:JSON.stringify(e))).join(""))&&(p=p.replace(/\x07/g,"`")),p}function handle_eval($vstr,$obj,$){var $val=null;return eval("$val = "+$vstr),null==$val?null:$val}return _$Inks_1}));